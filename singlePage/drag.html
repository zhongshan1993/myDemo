<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>写一个兼容性比较好的拖拽DEMO</title>
	<style>
		#div1 {
			background: rgb(40,40,40);
			width: 100px;
			height: 100px;
			position: absolute;
			color: #fff;
		}
	</style>
</head>
<body>
	实例文字实例文字实例文字实例文字
	<div id="div1">实例文字</div>
	实例文字实例文字实例文字实例文字
	<script>
		window.onload = function() {
			drag("div1");
		}
		function drag(id) {
			var oDiv = document.getElementById(id);

			oDiv.onmousedown = function(ev) {
				var oEvent = event || ev;
				var disX = oEvent.clientX - oDiv.offsetLeft;
				var disY = oEvent.clientY - oDiv.offsetTop;
				oDiv.style.cursor = "move";

				// for IE
				if (oDiv.setCapture) {
					oDiv.onmousemove = fnMove;
					oDiv.onmouseup = fnUp;
					oDiv.setCapture();
				} else {
		
					document.onmousemove = fnMove;
					document.onmouseup = fnUp;
				}

				function fnMove(ev) {
					var oEvent = event || ev;
					var l = oEvent.clientX - disX;
					var t = oEvent.clientY - disY;

					// 磁性吸附
					if (l < 50) {
						l = 0;
					} else if (l > document.documentElement.clientWidth - oDiv.offsetWidth-50) {
						l = document.documentElement.clientWidth - oDiv.offsetWidth;
					}
					if (t < 50) {
						t = 0;
					} else if (t > document.documentElement.clientHeight - oDiv.offsetHeight-50) {
						t = document.documentElement.clientHeight - oDiv.offsetHeight;
					}
					oDiv.style.left = l + 'px';
					oDiv.style.top = t + 'px';

				};
				function fnUp() {
					this.onmousemove = null;
					this.onmouseup = null;
					if (this.releaseCapture) {
						this.releaseCapture();
					}
				}
				return false; // 阻止文字选中
			}
		}
	</script>
</body>
</html>